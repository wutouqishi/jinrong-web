(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c441439"],{"0e21":function(e,t,n){"use strict";var i=n("c8ba2"),o=n.n(i);o.a},c8ba2:function(e,t,n){},f707:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bind-wrap"},[n("div",{staticClass:"b-title"},[e._v("绑定手机号")]),n("van-form",{on:{submit:e.onSubmit}},[n("van-field",{attrs:{name:"name",placeholder:"请填写姓名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("van-field",{attrs:{name:"phone",placeholder:"请填写手机号",rules:[{validator:e.validator,message:"手机号错误"}]},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),n("van-field",{attrs:{name:"verification_code",center:"",clearable:"",placeholder:"请输入短信验证码",rules:[{required:!0,message:"请填写验证码"}]},scopedSlots:e._u([{key:"button",fn:function(){return[n("van-button",{attrs:{disabled:!!e.time,size:"small",type:"primary"},on:{click:e.onSend}},[e._v(e._s(e.time?e.time+"s":"发送验证码"))])]},proxy:!0}]),model:{value:e.verification_code,callback:function(t){e.verification_code=t},expression:"verification_code"}}),n("div",{staticClass:"bin-button",staticStyle:{margin:"16px"}},[n("van-button",{attrs:{block:"",type:"danger","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},o=[],a=(n("b0c0"),n("4795"),n("3786")),s=n("c276"),c={data:function(){return{name:"",phone:"",openid_key:this.$store.state.openidKey,verification_key:"",verification_code:"",time:0}},created:function(){this.$store.state.openidKey||this.$router.push({name:"home"})},methods:{countdown:function(){var e=this;this.time>0?(this.time--,setTimeout((function(){e.countdown()}),1e3)):this.time=0},onSend:function(){var e=this;this.phone?Object(a["c"])({phone:this.phone}).then((function(t){e.verification_key=t.key,e.time=60,e.countdown()})):this.$toast.fail("请输入电话号码")},onSubmit:function(e){var t=this;console.log("submit",e);var n=this.name,i=this.phone,o=this.openid_key,c=this.verification_key,r=this.verification_code;Object(a["a"])({name:n,phone:i,openid_key:o,verification_key:c,verification_code:r,ivtCode:this.$ls.get("ivt_code")}).then((function(e){e.access_token?(t.$store.state.token=e.access_token,Object(s["c"])(e.access_token,e.expires_in/86400),t.$router.push({name:"home"})):t.$toast.fail(e.message)}))},validator:function(e){return/1\d{10}/.test(e)}}},r=c,u=(n("0e21"),n("2877")),l=Object(u["a"])(r,i,o,!1,null,null,null);t["default"]=l.exports}}]);